var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var e=a.length;0<e&&0<c;)if(b[--c]!=a[--e])return!1;return 0>=e}},"es6-impl","es3");
var wpsp={NO_DATE:"00000000",weeksPref:3,statusPref:!0,authorPref:!1,timePref:!0,doFeedbackPref:!0,isMoving:!1,inDrag:!1,isDragScrolling:!1,internalDateFormat:"ddMMyyyy",position:null,firstDayOfMonth:null,firstDayOfNextMonth:null,wp_dateFormat:"yyyy-MM-dd",cacheDates:[],tID:null,steps:0,CONCURRENCY_ERROR:4,PERMISSION_ERROR:5,NONCE_ERROR:6,currentDirection:!0,_wDate:Date.today(),moveDate:null,startOfWeek:null,posts:[],windowHeight:0,ltr:"ltr",isDraftsDrawerVisible:!1,init:function(){if(0!==jQuery("#scrollable_wpsp").length){"true"===
jQuery.cookie("wpsp_drafts_drawer")&&(wpsp.isDraftsDrawerVisible=!0,wpsp.setDraftsDrawerVisible(wpsp.isDraftsDrawerVisible));jQuery("#loading").hide();jQuery("#scrollable_wpsp").css("height",wpsp.getCalHeight()+"px");wpsp.windowHeight=jQuery(window).height();wpsp.createDaysHeader();jQuery("#scrollable_wpsp").scrollable({vertical:!0,size:wpsp.weeksPref,keyboard:!1,keyboardSteps:1,speed:100,easing:"linear"});var a=jQuery("#scrollable_wpsp").scrollable();a.getConf().keyboard=!1;var b=jQuery.cookie("date_wpsp");
b?(b=Date.parseExact(b,"yyyy-dd-MM"),wpsp.output("Resetting to date from the wpsp Date cookie: "+b)):b=Date.today();wpsp.moveTo(b.clone());/*jQuery("#scrollable_wpsp").bind("mousewheel",function(a,b){a=0<b?!1:!0;b=Math.abs(b);wpsp.output(a+" at a velocity of "+b);!wpsp.isMoving&&.2<b&&wpsp.move(1,a);return!1});*/a.onBeforeSeek(function(a,b){return!1});jQuery(document).bind("keydown",function(a){if(27===a.keyCode)return!1;if(!jQuery("#wpsp_quickedit").is(":visible"))if(40!==a.keyCode||a.altKey||
a.ctrlKey)if(38!==a.keyCode||a.altKey||a.ctrlKey){if(34===a.keyCode&&!a.altKey&&!a.ctrlKey||40===a.keyCode&&a.ctrlKey)return wpsp.move(wpsp.weeksPref,!0),!1;if(33===a.keyCode&&!a.altKey&&!a.ctrlKey||38===a.keyCode&&a.ctrlKey)return wpsp.move(wpsp.weeksPref,!1),!1}else return wpsp.move(1,!1),!1;else return wpsp.move(1,!0),!1});wpsp.getPosts(wpsp.nextStartOfWeek(b).add(-3).weeks(),wpsp.nextStartOfWeek(b).add(wpsp.weeksPref+3).weeks());jQuery("#moveToToday").click(function(){wpsp.moveTo(Date.today());
wpsp.getPosts(wpsp.nextStartOfWeek(Date.today()).add(-3).weeks(),wpsp.nextStartOfWeek(Date.today()).add(wpsp.weeksPref+3).weeks());return!1});jQuery("#moveToLast").click(function(){if("-1"!==wpsp.lastPostDate){var a=Date.parseExact(wpsp.lastPostDate,"ddMMyyyy");wpsp.moveTo(a);wpsp.getPosts(wpsp.nextStartOfWeek(a).add(-3).weeks(),wpsp.nextStartOfWeek(a).add(wpsp.weeksPref+3).weeks());return!1}});jQuery("#prevmonth").click(function(){wpsp.move(wpsp.weeksPref,!1);return!1});jQuery("#nextmonth").click(function(){wpsp.move(wpsp.weeksPref,
!0);return!1});jQuery("#newPostScheduleButton").on("click",function(a){if(jQuery(this).hasClass("disabled"))return!1;jQuery(this).addClass("disabled");return wpsp.savePost(null,!1,!0)});jQuery("#wpsp-title-new-field").bind("keyup",function(a){0<jQuery("#wpsp-title-new-field").val().length&&(!jQuery("#wpsp-time").is(":visible")||0<jQuery("#wpsp-time").val().length)?jQuery("#newPostScheduleButton").removeClass("disabled"):jQuery("#newPostScheduleButton").addClass("disabled");if(13===a.keyCode)return wpsp.savePost(null,
!0)});jQuery("#wpsp-status").bind("change",function(a){wpsp.updatePublishButton()});jQuery("#wpsp_select_weeks").on("keyup",function(a){0<jQuery("#wpsp_select_weeks").val().length?jQuery("#wpsp_optionssave").removeClass("disabled"):jQuery("#wpsp_optionssave").addClass("disabled");13===a.keyCode&&wpsp.saveOptions()});wpsp.savePosition();wpsp.addOptionsSection();jQuery("#wpsp-time").timePicker({show24Hours:"H:i"===wpsp.timeFormat,separator:":",step:30});jQuery("#showdraftsdrawer").click(function(){wpsp.setDraftsDrawerVisible(!wpsp.isDraftsDrawerVisible)})}},
setDraftsDrawerVisible:function(a,b){var c=jQuery("#showdraftsdrawer");c.hasClass("isLoaded")?b&&b():(c.addClass("isLoaded"),wpsp.setupDraftsdrawer(b));a?(jQuery("#cal_cont").css({"margin-right":"13.5%"}),jQuery("#draftsdrawer_cont").css({display:"block",width:"13%"}),c.html(wpsp.str_hidedrafts)):(jQuery("#cal_cont").css({"margin-right":"0"}),jQuery("#draftsdrawer_cont").css({display:"none",width:"0"}),c.html(wpsp.str_showdrafts));wpsp.isDraftsDrawerVisible=a;jQuery.cookie("wpsp_drafts_drawer",
a,{expires:2060})},setupDraftsdrawer:function(a){jQuery("#draftsdrawer_loading").css({display:"block"});wpsp.getPosts(wpsp.NO_DATE,null,function(){wpsp.initDraftsdrawer();a&&a()})},initDraftsdrawer:function(){var a=""+('<a href="#" adddate="'+wpsp.NO_DATE+'" class="daynewlink" style="margin-top: 5px;"title="'+wpsp.str_newdraft+'" id="unscheduledNewLink" onclick="wpsp.addDraft(); return false;">'+wpsp.str_addDraftLink+"</a>");a=a+'<ul class="postlist">'+wpsp.getPostItems(wpsp.NO_DATE);a+=
"</ul>";wpsp.draggablePost("#row"+wpsp._wDate.toString(wpsp.internalDateFormat)+" li.post");wpsp.makeDroppable(jQuery("#draftsdrawer div.day"));jQuery("#unscheduled").append(a);jQuery("#draftsdrawer_loading").css({display:"none"});a=jQuery("#cal_cont");jQuery("#unscheduled ul.postlist").css("min-height",a.height()-10-jQuery("#draftsdrawer .draftsdrawerheadcont").height()-jQuery("#unscheduledNewLink").outerHeight());jQuery("#unscheduled").mouseout(function(){jQuery("#unscheduledNewLink").hide()}).mouseover(function(){jQuery("#unscheduledNewLink").show()})},
alignGrid:function(a,b,c,d,e){if("draftsdrawer"!==jQuery(a).parent().attr("id")){var f=0,h=0,g=1;jQuery(a).each(function(){jQuery(this).css("position","relative");var a=jQuery(this).children("div");if(1===b||"ltr"===wpsp.ltr)for(var k=0;k<a.length;k++)a.eq(k).css({width:c+"%",height:d+"%",position:"absolute",left:f+"%",top:h+"%"}),0===g%b?(f=0,h+=d+e):f+=c+e,g++;else for(k=a.length-1;-1<k;k--)a.eq(k).css({width:c+"%",height:d+"%",position:"absolute",left:f+"%",top:h+"%"}),0===g%b?(f=0,h+=d+e):f+=
c+e,g++})}},alignCal:function(){wpsp.alignGrid("#cal",1,100,100/wpsp.weeksPref-1,1)},createDaysHeader:function(){var a=Date.today().next().sunday();wpsp.nextStartOfWeek(a);var b='<div class="dayheadcont"><div class="dayhead firstday">'+a.add(wpsp.startOfWeek).days().toString("dddd")+"</div>",b=b+('<div class="dayhead">'+a.add(1).days().toString("dddd")+"</div>"),b=b+('<div class="dayhead">'+a.add(1).days().toString("dddd")+"</div>"),b=b+('<div class="dayhead">'+a.add(1).days().toString("dddd")+
"</div>"),b=b+('<div class="dayhead">'+a.add(1).days().toString("dddd")+"</div>"),b=b+('<div class="dayhead">'+a.add(1).days().toString("dddd")+"</div>"),b=b+('<div class="dayhead lastday">'+a.add(1).days().toString("dddd")+"</div>");jQuery("#cal_cont").prepend(b);wpsp.alignGrid(".dayheadcont",7,13.8,100,.5)},getDateClass:function(a){var b;var c=-1===a.compareTo(Date.today())?"beforeToday":"todayAndAfter";wpsp.firstDayOfMonth||(wpsp.firstDayOfMonth=Date.today().moveToFirstDayOfMonth().clearTime(),
wpsp.firstDayOfNextMonth=Date.today().moveToLastDayOfMonth().clearTime());a.between(wpsp.firstDayOfMonth,wpsp.firstDayOfNextMonth)?b="month-present":1===a.compareTo(wpsp.firstDayOfMonth)?b="month-future":-1===a.compareTo(wpsp.firstDayOfNextMonth)&&(b="month-past");"01"===a.toString("dd")&&(c+=" firstOfMonth");return b+" "+c},showAddPostLink:function(a){wpsp.inDrag||(a=jQuery("#"+a+" a.daynewlink"),a.css("display","block"),a.bind("click",wpsp.addPost))},hideAddPostLink:function(a){jQuery("#"+
a+" a.daynewlink").hide().unbind("click",wpsp.addPost)},createRow:function(a,b){for(var c=wpsp._wDate.clone(),d='<div class="rowcont" id="row'+wpsp._wDate.toString(wpsp.internalDateFormat)+'"><div id="row'+wpsp._wDate.toString(wpsp.internalDateFormat)+'row" class="wpsp_row">',e=0;7>e;e++)d+="<div onmouseover=\"wpsp.showAddPostLink('"+c.toString(wpsp.internalDateFormat)+"');\" onmouseout=\"wpsp.hideAddPostLink('"+c.toString(wpsp.internalDateFormat)+'\');" id="'+c.toString(wpsp.internalDateFormat)+
'" class="day '+wpsp.getDateClass(c)+" "+c.toString("dddd").toLowerCase()+" month-"+c.toString("MM").toLowerCase()+'">',d+='<div class="dayobj">',d+='<a href="#" adddate="'+c.toString("MMMM d")+'" class="daynewlink" title="'+sprintf(wpsp.str_newpost,wpsp.chineseAposWorkaround(c.toString(Date.CultureInfo.formatPatterns.monthDay)))+'" onclick="return false;">'+wpsp.str_addPostLink+"</a>",d="01"===c.toString("dd")?d+('<div class="daylabel">'+c.toString("MMM d")):d+('<div class="daylabel">'+c.toString("d")),
d+="</div>",d+='<ul class="postlist">',d+=wpsp.getPostItems(c.toString(wpsp.internalDateFormat)),d+="</ul>",d+="</div>",d+="</div>",c.add(1).days();d+="</div></div>";b?a.append(d):a.prepend(d);wpsp.alignGrid("#row"+wpsp._wDate.toString(wpsp.internalDateFormat)+"row",7,13.9,100,.5);wpsp.draggablePost("#row"+wpsp._wDate.toString(wpsp.internalDateFormat)+" li.post");wpsp.makeDroppable(jQuery("#row"+wpsp._wDate.toString(wpsp.internalDateFormat)+" > div > div.day"));return jQuery("row"+wpsp._wDate.toString(wpsp.internalDateFormat))},
makeDroppable:function(a){a.droppable({hoverClass:"day-active",accept:function(a){return jQuery(this).hasClass("beforeToday")?a.hasClass("draft")?!0:!1:!0},greedy:!0,tolerance:"pointer",drop:function(a,c){a=c.draggable.parent().parent().parent().attr("id");wpsp.doDrop(a,c.draggable.attr("id"),jQuery(this).attr("id"))}})},doDrop:function(a,b,c,d){var e=wpsp.findPostForId(a,b);wpsp.removePostFromMap(a,b);var f=jQuery("#"+b);f.detach();setTimeout(function(){f.remove()},500);jQuery("#"+c+" .postlist").append(wpsp.createPostItem(e,
c));a===c?wpsp.draggablePost("#"+c+" .post"):wpsp.changeDate(c,e,d)},draggablePost:function(a){jQuery(a).each(function(){var a=wpsp.findPostForId(jQuery(this).parent().parent().parent().attr("id"),jQuery(this).attr("id"));wpsp.isPostMovable(a)&&(jQuery(this).draggable({revert:"invalid",appendTo:"body",helper:"clone",distance:1,addClasses:!1,start:function(){wpsp.inDrag=!0},stop:function(){wpsp.inDrag=!1},drag:function(a,b){wpsp.handleDrag(a,b)},scroll:!1,refreshPositions:!0}),jQuery(this).addClass("draggable"))})},
handleDrag:function(a,b){wpsp.isMoving||wpsp.isDragScrolling||(wpsp.isDragScrolling=!0,a.pageY<wpsp.position.top+10?wpsp.move(1,!1):a.pageY>wpsp.position.bottom-10&&wpsp.move(1,!0),setTimeout(function(){wpsp.isDragScrolling=!1},300))},removePostFromMap:function(a,b){if(wpsp.posts[a])for(var c=0;c<wpsp.posts[a].length;c++)if(wpsp.posts[a][c]&&"post-"+wpsp.posts[a][c].id===b)return wpsp.posts[a][c]=null,!0;return!1},addPostItem:function(a,b){jQuery("#"+b+" > div > ul").append(wpsp.createPostItem(a,
b))},addPostItemDragAndToolltip:function(a){wpsp.draggablePost("#"+a+" > div > ul > li")},deletePost:function(a,b){a=wpsp.ajax_url()+"&action=wpsp_deletepost&postid="+a;jQuery.ajax({url:a,type:"POST",processData:!1,timeout:1E5,dataType:"json",success:function(a){a.post.date_gmt===wpsp.NO_DATE?wpsp.removePostItem(a.post.date_gmt,"post-"+a.post.id):wpsp.removePostItem(a.post.date,"post-"+a.post.id);a.error?a.error===wpsp.NONCE_ERROR&&wpsp.showError(wpsp.checksum_error):wpsp.output('Finished deleting the post: "'+
a.post.title+'" with id:'+a.post.id);b&&b(a)},error:function(a){wpsp.showError(wpsp.general_error);a.responseText&&wpsp.output("deletePost xhr.responseText: "+a.responseText)}})},confirmDelete:function(a){return confirm(wpsp.str_del_msg1+a+wpsp.str_del_msg2)?!0:!1},ajax_url:function(){return ajaxurl+"?_wpnonce="+wpsp.wp_nonce},getMediaBar:function(){return jQuery("#cal_mediabar").html()},addPost:function(){jQuery("#newPostScheduleButton").addClass("disabled");var a=jQuery(this).parent().parent().attr("id"),
b=wpsp.defaultTime;"H:i"!==wpsp.timeFormat&&"G:i"!==wpsp.timeFormat&&(b+=" AM");a={id:0,date:a,formatteddate:wpsp.getDayFromDayId(a).toString(wpsp.previewDateFormat),time:b};wpsp.showForm(a);return!1},addDraft:function(){jQuery("#newPostScheduleButton").addClass("disabled");var a={id:0,date:Date.today(),formatteddate:wpsp.NO_DATE,time:wpsp.NO_DATE,status:"draft"};wpsp.showForm(a);return!1},editPost:function(a){jQuery("#newPostScheduleButton").removeClass("disabled");wpsp.getPost(a,wpsp.showForm);
return!1},savePost:function(a,b,c,d){if("undefined"===typeof a||null===a)a=wpsp.serializePost();if(!a.title||""===a.title)return!1;jQuery("#edit-slug-buttons").addClass("tiploading");var e=a.time.toUpperCase();"12"===e.slice(0,2)&&"PM"===e.slice(e.length-2,e.length)?a.time="12:"+e.slice(3,5):"12"===e.slice(0,2)&&"AM"===e.slice(a.time.length-2,a.time.length)&&(a.time="00:"+e.slice(3,5));var e=""!==a.time?Date.parse(a.time):Date.parse(wpsp.defaultTime);if(null!==e&&e!==wpsp.NO_DATE){var f=e.format("H:i:s");
var h=encodeURIComponent(wpsp.getDayFromDayId(a.date).toString(wpsp.wp_dateFormat)+" "+f)}else h=encodeURIComponent(a.date.toString(wpsp.wp_dateFormat+" H:i:s"));f=wpsp.ajax_url()+"&action=wpsp_savepost";a="date="+h+"&title="+encodeURIComponent(a.title)+"&content="+encodeURIComponent(a.content)+"&id="+encodeURIComponent(a.id)+"&status="+encodeURIComponent(a.status)+"&orig_status="+encodeURIComponent(a.orig_status);if(null===e||e===wpsp.NO_DATE)a+="&date_gmt="+encodeURIComponent("0000-00-00 00:00:00");
wpsp.getUrlVars().post_type&&(a+="&post_type="+encodeURIComponent(wpsp.getUrlVars().post_type));c&&(a+="&dopublish="+encodeURIComponent("future"));jQuery.ajax({url:f,type:"POST",processData:!1,data:a,timeout:1E5,dataType:"json",success:function(a){jQuery("#edit-slug-buttons").removeClass("tiploading");jQuery("#wpsp_quickedit").hide();jQuery("#scrollable_wpsp").data("scrollable").getConf().keyboard=!0;if(a.error)return a.error===wpsp.NONCE_ERROR&&wpsp.showError(wpsp.checksum_error),!1;if(a.post)if(b)window.location=
a.post.editlink.replace("&amp;","&");else{var c=a.post.date;a.post.date_gmt===wpsp.NO_DATE&&(c=a.post.date_gmt);a.post.id&&wpsp.removePostItem(c,"post-"+a.post.id);wpsp.addPostItem(a.post,c);wpsp.addPostItemDragAndToolltip(c)}else wpsp.showError("There was an error creating a new post for your blog.");d&&d(a);return!0},error:function(a){jQuery("#edit-slug-buttons").removeClass("tiploading");jQuery("#wpsp_quickedit").hide();jQuery("#scrollable_wpsp").data("scrollable").getConf().keyboard=!0;
wpsp.showError(wpsp.general_error);a.responseText&&wpsp.output("savePost xhr.responseText: "+a.responseText)}});return!1},serializePost:function(){var a={};jQuery("#wpsp_quickedit").find("input, textarea, select").each(function(){a[this.name]=this.value});return a},showForm:function(a){wpsp.resetForm();a.formatteddate===wpsp.NO_DATE||a.date_gmt===wpsp.NO_DATE?jQuery("#timeEditControls").hide():jQuery("#timeEditControls").show();jQuery("#wpsp_quickedit").center().show();jQuery("#scrollable_wpsp").data("scrollable").getConf().keyboard=
!1;a.id?(jQuery("#tooltiptitle").text(sprintf(wpsp.str_edit_post_title,a.typeTitle,wpsp.getDayFromDayId(a.date).toString(wpsp.previewDateFormat))),jQuery("#wpsp-title-new-field").val(a.title),jQuery("#content").val(a.content)):a.formatteddate===wpsp.NO_DATE?jQuery("#tooltiptitle").text(wpsp.str_newdraft_title):jQuery("#tooltiptitle").text(wpsp.str_newpost_title+a.formatteddate);"future"===a.status&&jQuery("#newPostScheduleButton").text(wpsp.str_update);a.status?(jQuery("#wpsp-status").val(a.status),
wpsp.updatePublishButton()):(0!==jQuery("#wpsp-status option[value="+wpsp.defaultStatus+"]").length?jQuery("#wpsp-status").val(wpsp.defaultStatus):jQuery("#wpsp-status").val("draft"),jQuery("#newPostScheduleButton").text(wpsp.str_save));a.status&&"draft"!==a.status&&"future"!==a.status&&"pending"!==a.status&&(jQuery("#wpsp-status").attr("disabled","true"),jQuery("#wpsp-status").append('<option class="temp" value="'+a.status+'">'+a.status+"</option>"),jQuery("#wpsp-status").val(a.status));
a.formatteddate!==wpsp.NO_DATE&&-1===wpsp.getDayFromDayId(a.date).compareTo(Date.today())&&jQuery("#wpsp-status").attr("disabled","true");var b=a.time;jQuery("#wpsp-time").val(b);jQuery("#wpsp-date").val(a.date);jQuery("#wpsp-id").val(a.id);jQuery("#wpsp-title-new-field").focus();jQuery("#wpsp-title-new-field").select()},hideForm:function(){jQuery("#wpsp_quickedit").hide();jQuery("#scrollable_wpsp").data("scrollable").getConf().keyboard=!0;wpsp.resetForm()},resetForm:function(){jQuery("#wpsp_quickedit").find("input, textarea, select").each(function(){this.value=
""});jQuery("#wpsp-status").removeAttr("disabled");jQuery("#newPostScheduleButton").text(wpsp.str_publish);jQuery("#tooltiptitle").text("");jQuery("#wpsp-status").removeAttr("disabled");jQuery("#wpsp-status .temp").remove()},createPostItem:function(a,b){wpsp.posts[b]||(wpsp.posts[b]=[]);wpsp.posts[b][wpsp.posts[b].length]=a;return wpsp.getPostItemString(a)},findPostForId:function(a,b){if(wpsp.posts[a])for(var c=0;c<wpsp.posts[a].length;c++)if(wpsp.posts[a][c]&&"post-"+wpsp.posts[a][c].id===
b)return wpsp.posts[a][c];return null},removePostItem:function(a,b){if(wpsp.findPostForId(a,b))for(var c=0;c<wpsp.posts[a].length;c++)wpsp.posts[a][c]&&"post-"+wpsp.posts[a][c].id===b&&(wpsp.posts[a][c]=null);jQuery("#"+b).remove()},getPostItems:function(a){var b="";if(wpsp.posts[a]){var c=wpsp.posts[a];if(50>c.length)for(a=0;a<c.length;a++)c[a]&&(b+=wpsp.getPostItemString(c[a]));else wpsp.addPostItems(a,0,50)}return b},addPostItems:function(a,b,c){var d=wpsp.posts[a],e="";setTimeout(function(){for(var f=
b;f<b+c&&f<d.length;f++)d[f]&&(e+=wpsp.getPostItemString(d[f]));jQuery("#"+a+" ul").append(e);b+c<d.length&&wpsp.addPostItems(a,b+c,50)},100)},showActionLinks:function(a){wpsp.actionTimer&&clearTimeout(wpsp.actionTimer);var b=wpsp.findPostForId(jQuery("#"+a).parent().parent().parent().attr("id"),a);if(!wpsp.inDrag&&wpsp.isPostEditable(b)){var c=jQuery("#"+a+" > div.postactions");wpsp.actionLinksElem&&wpsp.actionLinksElem.get(0)!==c.get(0)&&wpsp.actionLinksElem.slideUp();wpsp.actionLinksElem=
c;wpsp.actionTimer=setTimeout(function(){c.slideDown();if(c.parent().position().top+c.parent().height()>c.parent().parent().height()){var b=jQuery("#"+a+" > div.postactions").parent().parent();b.scrollTop(b.scrollTop()+45)}},250)}},hideActionLinks:function(a){wpsp.actionTimer&&clearTimeout(wpsp.actionTimer);wpsp.actionTimer=setTimeout(function(){jQuery("#"+a+" > div.postactions").slideUp();wpsp.actionLinksElem=null},1E3)},isPostMovable:function(a){return a.editlink&&"publish"!==a.status},isPostEditable:function(a){return a.editlink},
getPostEditableClass:function(a){return a.editlink?"":"readonly"},getPostItemString:function(a){var b=a.title;""===b&&(b="[No Title]");wpsp.statusPref&&("draft"===a.status&&"1"===a.sticky?b+=wpsp.str_draft_sticky:"pending"===a.status&&"1"===a.sticky?b+=wpsp.str_pending_sticky:"1"===a.sticky?b+=wpsp.str_sticky:"pending"===a.status?b+=wpsp.str_pending:"draft"===a.status?b+=wpsp.str_draft:"publish"!==a.status&&"future"!==a.status&&"pending"!==a.status&&(b+=" ["+a.status+"]"));wpsp.timePref&&(b=
'<span class="posttime">'+a.formattedtime+"</span> "+b);wpsp.authorPref&&(b=sprintf(wpsp.str_by,b,'<span class="postauthor">'+a.author+"</span>"));return wpsp.isPostMovable(a)?"<li onmouseover=\"wpsp.showActionLinks('post-"+a.id+"');\" onmouseout=\"wpsp.hideActionLinks('post-"+a.id+'\');" id="post-'+a.id+'" class="post '+a.status+" "+wpsp.getPostEditableClass(a)+a.slugs+'"><div class="postlink "><span>'+b+'</span></div><div class="postactions"><a href="'+a.editlink+'">'+wpsp.str_edit+'</a> | <a href="#" onclick="wpsp.editPost('+
a.id+'); return false;">'+wpsp.str_quick_edit+'</a> | <a href="'+a.dellink+'" onclick="return wpsp.confirmDelete(\''+a.title+"');\">"+wpsp.str_del+'</a> | <a href="'+a.permalink+'">'+wpsp.str_view+"</a></div></li>":"<li onmouseover=\"wpsp.showActionLinks('post-"+a.id+"');\" onmouseout=\"wpsp.hideActionLinks('post-"+a.id+'\');" id="post-'+a.id+'" class="post '+a.status+" "+wpsp.getPostEditableClass(a)+'"><div class="postlink "><span>'+b+'</span></div><div class="postactions"><a href="'+a.editlink+
'">'+wpsp.str_republish+'</a> | <a href="'+a.permalink+'">'+wpsp.str_view+"</a></div></li>"},setClassforToday:function(){jQuery("#"+Date.today().toString(wpsp.internalDateFormat)).addClass("today")},getCalHeight:function(){var a=jQuery(window).height()-jQuery("#footer").height()-jQuery("#wphead").height()-150;return Math.max(a,500)},move:function(a,b,c){if(!jQuery("#wpsp_quickedit").is(":visible")){wpsp.currentDirection!==b&&(wpsp._wDate=b?wpsp._wDate.add(7*(wpsp.weeksPref+7)).days():wpsp._wDate.add(-(7*
(wpsp.weeksPref+7))).days(),wpsp.steps=0,wpsp.moveDate=wpsp._wDate);wpsp.currentDirection=b;var d;if(b)for(d=0;d<a;d++)jQuery("#cal > div:first").remove(),wpsp.createRow(jQuery("#cal"),!0),wpsp._wDate.add(7).days();else for(d=0;d<a;d++)jQuery("#cal > div:last").remove(),wpsp.createRow(jQuery("#cal"),!1),wpsp._wDate.add(-7).days();wpsp.alignCal();wpsp.setClassforToday();wpsp.setDateLabel();wpsp.steps+=a;wpsp.tID?clearTimeout(wpsp.tID):wpsp.moveDate=wpsp._wDate;wpsp.tID=setTimeout(function(){b?
wpsp.getPosts(wpsp._wDate.clone().add(-7*(wpsp.steps+1)).days(),wpsp._wDate.clone(),c):wpsp.getPosts(wpsp._wDate.clone(),wpsp._wDate.clone().add(7*(wpsp.steps+1)).days(),c);wpsp.steps=0;wpsp.tID=null;wpsp.moveDate=wpsp._wDate},1E3);b?jQuery.cookie("date_wpsp",wpsp._wDate.clone().add(-(wpsp.weeksPref+4)).weeks().toString("yyyy-dd-MM")):jQuery.cookie("date_wpsp",wpsp._wDate.clone().add(3).weeks().toString("yyyy-dd-MM"))}},getDayFromDayId:function(a){return Date.parseExact(a.substring(2,
4)+"/"+a.substring(0,2)+"/"+a.substring(4),"MM/dd/yyyy")},setDateLabel:function(a){var b=jQuery("#scrollable_wpsp").scrollable().getVisibleItems();a=wpsp.getDayFromDayId(b.eq(0).children(".wpsp_row").children(".day:first").attr("id"));b=wpsp.getDayFromDayId(b.eq(wpsp.weeksPref-1).children(".wpsp_row").children(".day:last").attr("id"));jQuery("#currentRange").text(wpsp.chineseAposWorkaround(a.toString(Date.CultureInfo.formatPatterns.yearMonth))+" - "+wpsp.chineseAposWorkaround(b.toString(Date.CultureInfo.formatPatterns.yearMonth)))},
nextStartOfWeek:function(a){a=a.clone();if(null===wpsp.startOfWeek)if(wpsp.locale){var b=wpsp.locale.toUpperCase();wpsp.endsWith(b,"AS")||wpsp.endsWith(b,"AZ")||wpsp.endsWith(b,"BW")||wpsp.endsWith(b,"CA")||wpsp.endsWith(b,"CN")||wpsp.endsWith(b,"FO")||wpsp.endsWith(b,"GB")||wpsp.endsWith(b,"GE")||wpsp.endsWith(b,"GL")||wpsp.endsWith(b,"GU")||wpsp.endsWith(b,"HK")||wpsp.endsWith(b,"IE")||wpsp.endsWith(b,"IL")||wpsp.endsWith(b,"IN")||wpsp.endsWith(b,"IS")||wpsp.endsWith(b,"JM")||
wpsp.endsWith(b,"JP")||wpsp.endsWith(b,"KG")||wpsp.endsWith(b,"KR")||wpsp.endsWith(b,"LA")||wpsp.endsWith(b,"MH")||wpsp.endsWith(b,"MN")||wpsp.endsWith(b,"MO")||wpsp.endsWith(b,"MP")||wpsp.endsWith(b,"MT")||wpsp.endsWith(b,"NZ")||wpsp.endsWith(b,"PH")||wpsp.endsWith(b,"PK")||wpsp.endsWith(b,"SG")||wpsp.endsWith(b,"SY")||wpsp.endsWith(b,"TH")||wpsp.endsWith(b,"TT")||wpsp.endsWith(b,"TW")||wpsp.endsWith(b,"UM")||wpsp.endsWith(b,"US")||wpsp.endsWith(b,"UZ")||wpsp.endsWith(b,"VI")||
wpsp.endsWith(b,"ZW")?wpsp.startOfWeek=0:wpsp.endsWith(b,"MV")?wpsp.startOfWeek=5:wpsp.endsWith(b,"AF")||wpsp.endsWith(b,"BH")||wpsp.endsWith(b,"DJ")||wpsp.endsWith(b,"DZ")||wpsp.endsWith(b,"EG")||wpsp.endsWith(b,"ER")||wpsp.endsWith(b,"ET")||wpsp.endsWith(b,"IQ")||wpsp.endsWith(b,"IR")||wpsp.endsWith(b,"JO")||wpsp.endsWith(b,"KE")||wpsp.endsWith(b,"KW")||wpsp.endsWith(b,"LY")||wpsp.endsWith(b,"MA")||wpsp.endsWith(b,"OM")||wpsp.endsWith(b,"QA")||wpsp.endsWith(b,"SA")||wpsp.endsWith(b,
"SD")||wpsp.endsWith(b,"SO")||wpsp.endsWith(b,"TN")||wpsp.endsWith(b,"YE")?wpsp.startOfWeek=6:wpsp.startOfWeek=1}else wpsp.startOfWeek=0;return a.next().sunday().add(wpsp.startOfWeek).days()},endsWith:function(a,b){return a.match(b+"$")===b},moveTo:function(a){wpsp.isMoving=!0;jQuery("#cal").empty();jQuery.cookie("date_wpsp",a.toString("yyyy-dd-MM"));wpsp._wDate=wpsp.nextStartOfWeek(a).add(-21).days();wpsp.currentDirection=!0;a=wpsp.weeksPref+6;for(var b=0;b<a;b++)wpsp.createRow(jQuery("#cal"),
!0),wpsp._wDate.add(7).days();wpsp.alignCal();jQuery("#scrollable_wpsp").scrollable().move(2);wpsp.setDateLabel();wpsp.setClassforToday();wpsp.isMoving=!1},savePosition:function(){var a=jQuery("#scrollable_wpsp"),b=jQuery("#cal_cont");wpsp.position={top:a.offset().top,bottom:a.offset().top+a.height()};jQuery("#wpsp_styleofpost").remove();a=jQuery(".rowcont:eq(2) .dayobj:first").height()-jQuery(".rowcont:eq(2) .daylabel:first").height()-6;jQuery("head").append('<style id="wpsp_styleofpost" type="text/css">.ui-draggable-dragging {width: '+
(jQuery(".rowcont:eq(2) .day:first").width()-5)+"px;}.postlist {height: "+a+"px;}</style>");jQuery("#draftsdrawer").css("height",b.height());jQuery("#draftsdrawer .day").css("min-height",b.height()-10-jQuery("#draftsdrawer .draftsdrawerheadcont").height())},addFeedbackSection:function(){3<wpsp.visitCount&&wpsp.doFeedbackPref&&jQuery("#wpsp_title_main").after(wpsp.str_feedbackmsg)},doFeedback:function(){jQuery.getScript("https://wordpress.org/plugins/wp-scheduled-posts/?js",function(){wpsp.saveFeedbackPref()})},
noFeedback:function(){jQuery("#feedbacksection").hide("fast");wpsp.saveFeedbackPref()},saveFeedbackPref:function(){var a=wpsp.ajax_url()+"&action=wpsp_saveoptions&dofeedback="+encodeURIComponent("done");jQuery.ajax({url:a,type:"POST",processData:!1,timeout:1E5,dataType:"text",success:function(a){jQuery("#feedbacksection").html(wpsp.str_feedbackdone);setTimeout(function(){jQuery("#feedbacksection").hide("slow")},5E3)},error:function(a){wpsp.showError(wpsp.general_error);a.responseText&&wpsp.output("saveOptions xhr.responseText: "+
a.responseText)}})},updatePublishButton:function(){"future"===jQuery("#wpsp-status").val()&&jQuery("#newPostScheduleButton").text(wpsp.str_publish);"pending"===jQuery("#wpsp-status").val()?jQuery("#newPostScheduleButton").text(wpsp.str_review):jQuery("#newPostScheduleButton").text(wpsp.str_save)},changeDate:function(a,b,c){var d=a===wpsp.NO_DATE,e=b.date_gmt===wpsp.NO_DATE,f=d?"0000-00-00":wpsp.getDayFromDayId(a).toString(wpsp.wp_dateFormat),h=e?b.date_gmt:wpsp.getDayFromDayId(b.date).toString(wpsp.wp_dateFormat);
d&&(b.status="draft");f=wpsp.ajax_url()+"&action=wpsp_changedate&postid="+b.id+"&postStatus="+b.status+"&newdate="+f+"&olddate="+h;jQuery("#post-"+b.id).addClass("loadingclass");jQuery.ajax({url:f,type:"POST",processData:!1,timeout:1E5,dataType:"json",success:function(b){b.error&&(wpsp.removePostItem(a,"post-"+b.post.id),b.error===wpsp.CONCURRENCY_ERROR?wpsp.displayMessage(wpsp.concurrency_error+"<br />"+b.post.title):b.error===wpsp.PERMISSION_ERROR?wpsp.displayMessage(wpsp.permission_error):
b.error===wpsp.NONCE_ERROR&&wpsp.displayMessage(wpsp.checksum_error));var f=d?"00000000":b.post.date,g=e?a:f;wpsp.removePostItem(f,"post-"+b.post.id);wpsp.addPostItem(b.post,g);wpsp.addPostItemDragAndToolltip(g);c&&c(b)},error:function(a,b,c){wpsp.showError(wpsp.general_error);wpsp.output("textStatus: "+b);wpsp.output("error: "+c);a.responseText&&wpsp.output("changeDate xhr.responseText: "+a.responseText)}})},getPosts:function(a,b,c){b||(b="");wpsp.cacheDates[a]?c&&c():(wpsp.cacheDates[a]=
!0,b=wpsp.ajax_url()+"&action=wpsp_posts&from="+a.toString("yyyy-MM-dd")+"&to="+b.toString("yyyy-MM-dd"),wpsp.getUrlVars().post_type&&(b+="&post_type="+encodeURIComponent(wpsp.getUrlVars().post_type)),jQuery("#loading").show(),jQuery.ajax({url:b,type:"GET",processData:!1,timeout:1E5,dataType:"text",success:function(b){jQuery("#loading").hide();var d=null;try{d=JSON.parseIt(b)}catch(l){wpsp.showFatalError(wpsp.str_fatal_parse_error+l.message);window.console&&console.error(l);return}if(d.error)d.error===
wpsp.NONCE_ERROR&&wpsp.showError(wpsp.checksum_error);else{for(var f=[],h=d.length;0<=h;h--){var g=d[h];g&&"trash"!==g.status&&(g.date=g.date.replace(g.date.substring(2,3),g.date.substring(2,3).toUpperCase()),"00000000"===a&&(g.date=a),wpsp.removePostItem(g.date,"post-"+g.id),wpsp.addPostItem(g,g.date),f[f.length]=g.date)}setTimeout(function(){jQuery.each(f,function(a,b){wpsp.addPostItemDragAndToolltip(b)})},300);c&&c(b)}},error:function(a){wpsp.showError(wpsp.general_error);a.responseText&&
wpsp.output("getPosts xhr.responseText: "+a.responseText)}}))},getPost:function(a,b){if(0===a)return!1;jQuery("#loading").show();a=wpsp.ajax_url()+"&action=wpsp_getpost&postid="+a;wpsp.getUrlVars().post_type&&(a+="&post_type="+encodeURIComponent(wpsp.getUrlVars().post_type));jQuery.ajax({url:a,type:"GET",processData:!1,timeout:1E5,dataType:"json",success:function(a){jQuery("#loading").hide();wpsp.output("xhr for getPost returned: "+a);if(a.error)return a.error===wpsp.NONCE_ERROR&&wpsp.showError(wpsp.checksum_error),
!1;"function"===typeof b&&b(a.post);return a.post},error:function(a){jQuery("#loading").hide();wpsp.showError(wpsp.general_error);a.responseText&&wpsp.output("getPost xhr.responseText: "+a.responseText);return!1}});return!0},addOptionsSection:function(){var a='<div class="hide-if-no-js screen-meta-toggle" id="screen-options-link-wrap"><a class="show-settings" id="show-wpsp-settings-link" onclick="wpsp.toggleOptions(); return false;" href="#" >'+wpsp.str_screenoptions+"</a></div>";0===jQuery("#screen-meta-links").length&&
jQuery("#screen-meta").after('<div id="screen-meta-links"></div>');jQuery("#screen-meta-links").append(a)},toggleOptions:function(){if(wpsp.helpMeta)jQuery("#contextual-help-wrap").slideUp("fast"),jQuery("#contextual-help-wrap").html(wpsp.helpMeta),wpsp.helpMeta=null,jQuery("#show-wpsp-settings-link").removeClass("screen-meta-active"),jQuery("#contextual-help-link-wrap").css("visibility","");else{wpsp.helpMeta=jQuery("#contextual-help-wrap").html();for(var a='<div class="metabox-prefs" id="calendar-fields-prefs"><h5>'+
wpsp.str_show_opts+'</h5><label for="author-hide"><input type="checkbox" '+wpsp.isPrefChecked(wpsp.authorPref)+'value="true" id="author-hide" name="author-hide" class="hide-column-tog" />'+wpsp.str_opt_author+'</label><label for="status-hide"><input type="checkbox" '+wpsp.isPrefChecked(wpsp.statusPref)+'value="true" id="status-hide" name="status-hide" class="hide-column-tog" />'+wpsp.str_opt_status+'</label><label for="time-hide"><input type="checkbox" '+wpsp.isPrefChecked(wpsp.timePref)+
'value="true" id="time-hide" name="time-hide" class="hide-column-tog" />'+wpsp.str_opt_time+"</label></div>",a=a+('<div class="metabox-prefs"><h5>'+wpsp.str_show_title+'</h5><select id="wpsp_select_weeks" class="screen-per-page" title="'+wpsp.str_weekstt+'"> '),b=parseInt(wpsp.weeksPref,10),c=1;9>c;c++)a=c===b?a+('<option selected="true">'+c+"</option>"):a+("<option>"+c+"</option>");a+="</select>"+wpsp.str_opt_weeks+"</div>";a+='<br /><button id="wpsp_optionssave" onclick="wpsp.saveOptions(); return false;" class="save button">'+
wpsp.str_apply+"</button>";jQuery("#contextual-help-wrap").html(a);jQuery("#contextual-help-link-wrap").css("visibility","hidden");jQuery("#contextual-help-wrap").slideDown("normal");jQuery("#screen-meta").show();jQuery("#show-wpsp-settings-link").addClass("screen-meta-active")}},generateColorPicker:function(a,b,c){a='<div id="'+b+'" class="optionscolorrow">'+('<span style="background-color: '+c+';" class="colorlabel"> '+a+"</span> ");var d="lightred orange yellow lightgreen lightblue purple lightgray".split(" ");
wpsp.output("colors.length: "+d.length);for(var e=0;e<d.length;e++)a+='<a href="#" class="optionscolor ',d[e]===c&&(a+="colorselected"),a+='" class='+b+d[e]+'" style="background-color: '+d[e]+"; left: "+(20*e+50)+'px" onclick="wpsp.selectColor(\''+b+"', '"+d[e]+"'); return false;\"></a>";return a+"</div>"},selectColor:function(a,b){wpsp.output("selectColor("+a+", "+b+")");jQuery("#"+a+" .colorlabel").css("background-color",b);jQuery("#"+a+" .colorselected").removeClass("colorselected");jQuery("#"+
a+"value").addClass("colorselected")},isPrefChecked:function(a){return a?' checked="checked" ':""},saveOptions:function(){var a=parseInt(jQuery("#wpsp_select_weeks").val(),10);if(1>a||8<a)humanMsg.displayMsg(wpsp.str_weekserror);else{var b=wpsp.ajax_url()+"&action=wpsp_saveoptions&weeks="+encodeURIComponent(jQuery("#wpsp_select_weeks").val());jQuery("#calendar-fields-prefs").find("input, textarea, select").each(function(){b+="&"+encodeURIComponent(this.name)+"="+encodeURIComponent(this.checked)});
jQuery.ajax({url:b,type:"POST",processData:!1,timeout:1E5,dataType:"text",success:function(a){window.location.href=window.location.href},error:function(a){wpsp.showError(wpsp.general_error);a.responseText&&wpsp.output("saveOptions xhr.responseText: "+a.responseText)}})}},output:function(a){window.console&&console.log(a)},showError:function(a){window.console&&console.error(a);wpsp.displayMessage(a)},displayMessage:function(a){humanMsg.displayMsg(a)},getUrlVars:function(){for(var a=[],b,c=window.location.href.slice(window.location.href.indexOf("?")+
1).split("&"),d=0;d<c.length;d++)b=c[d].split("="),a.push(b[0]),a[b[0]]=b[1];return a},showFatalError:function(a){jQuery("#wpsp_title_main").after('<div class="error below-h2" id="message"><p>'+wpsp.str_fatal_error+a+"<br></p></div>");window.console&&console.error(a)},chineseAposWorkaround:function(a){return 0===Date.CultureInfo.name.indexOf("zh")||0===Date.CultureInfo.name.indexOf("ja")?a.replace(/'/g,""):a}};
jQuery.fn.center=function(){this.css("position","absolute");this.css("top",(jQuery(window).height()-this.outerHeight())/2+jQuery(window).scrollTop()+"px");this.css("left",(jQuery(window).width()-this.outerWidth())/2+jQuery(window).scrollLeft()+"px");return this};jQuery(document).ready(function(){try{wpsp.init()}catch(a){wpsp.output("Error loading calendar: "+a),wpsp.showFatalError(a.description)}wpsp.getUrlVars().qunit&&wpsp_test.runTests()});
